---
title: 'The Math of "The Big Short" (But Even Shorter) '
date: 2025-06-05
permalink: /posts/2025/06/CDS/
tags:
  - 
  - 
excerpt: 
---

If you are here, you've probably watched "The Big Short". The 2015 film directed by Adam Mckay centers around the events that led to the 2008 financial collapse. Unfortunatly for us, the viewers, Wall Street is laden with strange acronyms and terminology which we had unbewingly thrust on to us during the movies's 130 minute runtime. And while we are thankful to Mckay for the film's short assides where Margo Robie, Salena Gomez, and Anthony Bourdain explain what in the world coladoralized debt obligations (CDO) or credit default swaps (CDS) are, you may have still left the theater a tad confused. So while I cant hire Margo Robie to explain the math behind some of these financial instruments from a bubble bath, I'll do my best in today blog post. We'll start by walking through a model for credit default swaps before moving on to a simplifed pricing model for collateralized debt obligations. 

Credit Default Swaps
-----
A credit default swap, put simply is insurance. Assume for a moment, that Bob has a bond which pays out $$\$100$$ at some experiation date in the future. However there is a risk that the bond defaults at some time $$\tau \leq T$$, in which case Bob gets nothing. Considering the risk, Bob decides to look for a way to hedge against the risk that his bond defaults. Bob decides to pay for insurance. Every month Bob will pay Alice some premium so that if the bond defaults Bob can ask Alice for a peice of the $$\$100$$ he was expecting. On this flip side, if the bond doesnt default, then Alice gets to keep the premium and doesnt have to give Bob a cent. Lets formalize this interaction. 

#### Assumptions
- (i) Let $$0=T_1 < T_1 < \dots < T_n = T, \quad \Delta t = \frac{T}{n}$$. (i.e there are $$n$$ months between Bob purchasting the insurance policy and the maturity date of the bond)
- (ii) Bob pays Alice a premium of $$C\Delta t$$ every month $$T_i$$ untill either maturity of the bond $$T$$ or the bond defaults at $$\tau \leq T$$ (i.e Bob pays at every month $$T_i \leq \max(T,\tau)$$
- (iii) If the bond defaults at time $$\tau$$ such that $$T_{i-1}<\tau \leq T_i$$, then Alice pays Bob some payout $$1-\delta$$ in month $$T_i$$
- (iv) Assume that the probability of the bond defaulting anytime after month $$T_i$$ is $$\mathbb{P}(\tau > T_i) = e^{-\lambda t}$$. In other words, after every month that the bond does not default, the probability of default shrink exponentially. *We are functionally treating a default event as an exponential random variable*
- (v) $$r$$ is a constant interest rate from during the $$n$$ months Bob ownes the bond. 

Using these assumption we can model the expected amount Bob will owe alice after $$n$$ months of owning the insurance policy. We will call this value $$b_0$$, which can be computed by summing over all discounted premiums Bob pays untill the bond matures or the bond defaults. 

$$b_0 = \sum_{i=1}^n \mathbb{E}[C \Delta t e^{-r T_i} \mathbb{I}_{\tau > T_i}]$$

$$\quad = C \sum_{i=1}^n \Delta t e^{-r T_i} e^{-\lambda T_i}$$

$$\quad = C \sum_{i=1}^n \Delta t e^{-(r+\lambda) T_i}$$

We can also model the expected amount that Alice will have to pay Bob. We will call this value $$a_0$$, which can be computed by summing over all payments Alice makes to Bob over the course of the $$n$$ month insurance policy. In this case our model is easier since $$a_0$$ is just the discounted payout $$(1-\delta)$$ times the probability that a default occurs at month $$T_i$$

$$a_0 = \sum_{i=1}^n \mathbb{E}[e^{-rT_i}(1-\delta)\mathbb{I}_{T_{i-1} < \tau \leq T_i}]$$
$$ \quad = -(1-\delta) \sum_{i=1}^n \mathbb{E}[e^{-rT_i}(e^{-\lambda T_{i}-e^{-\lambda T_{i-1})$$


The question for you, the reader, is how expesnive should Bob's premium be? One possible answer is that we should choose $$C$$ such that $$a_0 = b_0$$, since at the begining of the interaction neither Alice or Bob should have an earning advantage over the other. This is called the risk neutral or the "fair" price. An unfair price would be one where $$C$$ is chosen such that $$a_0 < b_0$$. In that case Alice could keep selling Bob insurance and in the long run Alice would turn a profit. Now you might be asking yourself isn't that how an insurance company stays profitable. Yes it is, an insurance company unsurprisngly makes money by giving you, the insuree,  an "unfair price" for your policy. But lets not get political, and instead solve for the theoretically "fair" value of $$C$$. 

$$b_0 = C \sum_{i=1}^n \Delta t e^{-(r+\lambda) T_i} = -(1-\delta) \sum_{i=1}^n \mathbb{E}[e^{-rT_i}(e^{-\lambda T_{i}-e^{-\lambda T_{i-1}) = a_0$$

Let now take $$n \rightarrow \infty$$, in which case these sums become integrals

$$C \int_{0}^T e^{-(r+\lambda)t}dt = -(1-\delta) \int_{0}^T e^{-rt}(de^{-\lambda t})$$

$$C \int_{0}^T e^{-(r+\lambda)t}dt =  -(1-\delta) \int_{0}^T e^{-rt}(-\lambda e^{-\lambda t}dt)$$

$$C \int_{0}^T e^{-(r+\lambda)t}dt =  \lambda(1-\delta) \int_{0}^T e^{-(r+\lambda)t}dt)$$

$$C  =  \lambda(1-\delta)$$

We now know that the "fair" premium that Bob should pay is the rate at which the bond defaults every month $$\lambda$$ times the payout Bob receives if the bond does infact default $$(1-\delta)$$. This is a pretty intuitive payment plan for Bob so he decides to buy the insurance policy from Alice, and just like they've engaged in a "fair" credit default swap. 




